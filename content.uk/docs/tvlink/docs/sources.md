---
title: Налаштування джерел каналів
weight: 13
---

## Налаштування джерел каналів

На сторінці «Sources» ви маєте можливість зробити такі налаштування:

+ плейлисти (Playlists sources)
+ доповнення (Addon sources)
+ портали Stаlker/Ministra (Portal sources)
+ джерела для Acestream (AceStream sources)
+ [створення логотипів каналів (Channel picons)](/docs/tvlink/docs/channels/#утиліта-picons)
+ [розклад передач каналів (XMLTV EPG sources)](/docs/tvlink/docs/epg/)
+ [профілі користувачів (User Profiles)](/docs/tvlink/docs/profiles/)

## Джерела плейлистів

Активуйте перемикач «Playlists sources». Натисніть кнопку «Add playlist».

<p align="center">
  <a href="/tvlink/sources/01.png"><img src="/tvlink/sources/01.png" width="480"/></a>
</p>

У вікні «Add new playlist»:

+ Введіть назву плейлиста. Вона має бути латинськими літерами, без спеціальних символів
(пробілів, тире та інше) та не може починатися з цифри.
+ Введіть url-адресу плейлиста. Якщо файл плейлиста збережений на локальному комп’ютері, формат
адреси повинен бути таким: «file:///path_to/your_playlist_file» (наприклад, file:///Data/list/playlist.m3u).

Натисніть кнопку «Save changes».

<p align="center">
  <a href="/tvlink/sources/02.png"><img src="/tvlink/sources/02.png" width="480"/></a>
</p>

## Джерела доповнень

Натисніть кнопку «Add addon». У вікні «Add new addon» натисніть (для деяких браузерів потрібне подвійне натискання)
на поле «Addon name». З’явиться перелік готових доповнень, що вже присутні у репозиторію.
Виберіть той, що вам потрібен, і натисніть «Save changes».

<p align="center">
  <a href="/tvlink/sources/03.png"><img src="/tvlink/sources/03.png" width="480"/></a>
</p>

{{% hint info %}}
Ви також можете створити власне доповнення. Інструкцію щодо цього дивіться [тут](/docs/tvlink/docs/addons-api/).
{{% /hint %}}

## Джерела Ministra/Stаlker Middleware

Натисніть кнопку «Add portal». У вікні «Add new Portal (Stаlker Middleware)» введіть наступні дані:

+ Назву порталу (Portal name). Вона має бути латинськими літерами, без спеціальних символів (пробілів, тире тощо) та не може починатися з цифри.
+ Url-адресу порталу (Portal url).
+ MAC-адресу для доступу до порталу (User MAC).

Необов’язковий перемикач «Use HLS streams» дозволяє отримувати HLS-потоки, якщо це підтримується Порталом.
На етапі створення порталу рекомендується не вмикати цей параметр, якщо немає впевненості у підтримці HLS-потоків.

<p align="center">
  <a href="/tvlink/sources/04.png"><img src="/tvlink/sources/04.png" width="480"/></a>
</p>

Після того як ви натиснете кнопку «Save changes», у каталозі «tvlink/scrapers» буде створено файл з іменем вашого порталу.
Наприклад, «tvlink/scrapers/Portal.py». Цей файл містить три змінні, які ви можете редагувати (це необов’язково):

+ INCLUDE_GROUP – це список груп каналів для отримання. Усі інші групи будуть ігноруватися (не потраплять до списку).
Зауважте, що перевіряється точний збіг з урахуванням регістру символів.

+ EXCLUDE_NAME – це список, в якому можна задати символи, що будуть виключені з назви каналу.
Наприклад, якщо назва каналу «US Discovery HD», а ви хочете мати «Discovery HD», зробіть EXCLUDE_NAME = ['US '].
Зауважте, у цьому прикладі є пробіл в кінці 'US '.

+ DEFAULT_LOGO – це URL-адреса іконки, яка буде застосована для каналів, де іконка відсутня,
або якщо в налаштуваннях джерела ввімкнено опцію «Disable load icons».

{{% hint info %}}
Після редагування цих змінних потрібно натиснути «Apply Settings» на сторінці «Settings», або перезавантажити програму.
{{% /hint %}}

<p align="center">
  <a href="/tvlink/sources/05.png"><img src="/tvlink/sources/05.png" width="480"/></a>
</p>

Після створення Порталу ви можете змінювати опції «Portal url», «User MAC», «Use HLS streams», «Disable load icons»
та «Repeat source streams» без перезавантаження налаштувань. Однак потрібно оновити джерело (натиснути на іконку «Update»).

<p align="center">
  <a href="/tvlink/sources/06.png"><img src="/tvlink/sources/06.png" width="480"/></a>
</p>

+ «Disable load icons» — вимикає отримання іконок каналів з порталу. На деяких порталах можуть бути прописані недійсні адреси іконок.
Це призводить до затримки (залежить від вашого браузера) відображення списків каналів у веб-інтерфейсі програми.

+ «Repeat source streams» — дозволяє встановити кількість повторів програвання потоку під час збоїв. Ця опція не має відношення до
Streamlink-опції «Stream retry count». Значення «always» — повтори не обмежені, «0» — функція відключена (за замовчуванням),
інші значення — кількість повторів.

{{% hint info %}}
Якщо ваш канал має лише один потік і цей потік хоч якось працює, «TVLINK» нескінченно намагатиметься перезапустити цей потік.
Функція «Repeat source streams» робить те саме для джерела (потоку цього джерела) каналу, де більше ніж один потік.
Таким чином, переключення на наступний потік цього каналу відбудеться за умови: або потік зовсім перестав працювати,
або за вибраною вами кількістю повторів. Якщо вибрано «always» — то тільки якщо потік перестав хоч щось віддавати.
{{% /hint %}}

## Джерела AceStream

Натисніть кнопку «Add Acestream». У вікні «Add new AceStream source» введіть:

+ Назву джерела (Source name). Вона має бути латинськими літерами, без спеціальних символів
(пробілів, тире та інше) та не може починатися з цифри.

+ URL-адресу сервера <a target='_blank' href="https://wiki.acestream.media/Main_Page">«AceStream»</a> у форматі http://ip-address:port (наприклад: «http://192.168.1.1:6878»).

+ Необов’язковий перемикач «Use HLS streams» дозволяє отримувати HLS-потоки.
Не рекомендується вмикати, якщо сервер «AceStream» працює у вашій локальній мережі, оскільки це значно збільшить час перемикання каналів.

Після того як ви натиснете кнопку «Save changes», ви можете в налаштуваннях джерела ввести групу/групи каналів, які ви хочете отримати,
в поле «Channel Categories (comma-delimited)». За замовчуванням це поле порожнє, і це означає, що будуть завантажені всі канали всіх груп (їх близько 3000).
Назви офіційних груп ви знайдете <a target='_blank' href="https://wiki.acestream.media/Channel_Category">тут</a>.
Користувачі, які запускають трансляції, можуть створювати свої назви груп або зовсім ігнорувати створення групи.
Тому якщо вам потрібні всі канали, які є в базі «AceStream», то залиште поле «Channel Categories (comma-delimited)» пустим.

<p align="center">
  <a href="/tvlink/sources/07.png"><img src="/tvlink/sources/07.png" width="480"/></a>
</p>

База каналів завантажується напряму з <a target='_blank' href="https://wiki.acestream.media/Search_API">«AceStream Server-side Search API»</a>
і не залежить від інших ресурсів (наприклад: pomoyka.i2p).

## Таблиця Джерела

Після того як буде створено джерело каналів, ви побачите таку таблицю:

<p align="center">
  <a href="/tvlink/sources/08.png"><img src="/tvlink/sources/08.png" width="480"/></a>
</p>

+ «Name» — ім’я джерела, налаштування та видалення цього джерела. Коли джерело активне й оновлене, його назва стає посиланням на редагування («співставлення») каналів для цього джерела.
Іконка налаштувань відображається синім кольором, якщо джерело має налаштування потоків «за замовчуванням», і зеленим кольором, якщо користувач змінив параметри.
+ «Catchup» — вибір архіву. Підтримуються типи: «Append», «Shift» та «Flussonic».
+ «Enable» — вмикання або вимикання джерела.
+ «Prio» — пріоритет джерела. Чим менше значення, тим вищий пріоритет.
+ «Limit» — обмежує доступ клієнтів до джерела. Значення — це максимальна кількість клієнтів, які можуть дивитися одночасно з цього джерела.
+ «Add channels» — якщо цей перемикач увімкнений, і ви оновите джерело, усі канали джерела будуть автоматично додані до списку каналів «TVLINK» («зіставлення каналів»).
Це працює лише при ручному (примусовому) оновленні каналів, але при автоматичному оновленні ця опція ігнорується.
+ «New channels» — якщо цей перемикач увімкнений, при оновленні джерела до списку каналів «TVLINK» додаватимуться нові канали, якщо вони з’являться в цьому джерелі.
+ «Update period» — час (у годинах), через який джерело буде автоматично оновлюватися. Нуль означає, що оновлення вимкнено.
+ «Update» — негайне оновлення джерела, а також час останнього оновлення.
+ «Links» — кількість посилань на потоки (канали), які містить це джерело.

## Додавання каналів до списку

Є два варіанти, як ви можете додати канали з джерела до списку каналів «TVLINK» (зіставлення каналів):

1. Увімкнути перемикач «Add channels» та натиснути «Update». В цьому разі всі канали джерела будуть автоматично додані до списку каналів «TVLINK».
2. Оновити джерело, натиснувши «Update». Після цього назва джерела стає посиланням на сторінку, де ви можете додавати канали в ручному режимі.

<p align="center">
  <a href="/tvlink/sources/09.png"><img src="/tvlink/sources/09.png" width="480"/></a>
</p>

Перемикач «Map» додає канал до списку каналів «TVLINK», при додаванні каналів створюється група, до якої належить канал, і переноситься його іконка.

## Автоматичне об'єднання каналів

«TVLINK» автоматично об’єднує канали з однаковими назвами. Тому кількість каналів джерела («Links») не завжди відповідає кількості каналів у списку «TVLINK».
При об’єднанні регістр символів та пробіли у назві каналу ігноруються. Наприклад, усі канали з такими іменами будуть вважатися одним і тим самим каналом:

+ Channel 25
+ CHANNEL 25
+ ChaNNel25

{{% hint info %}}
Якщо у джерела присутні групи каналів, їх також буде експортовано.
Якщо груп немає, усім каналам джерела буде присвоєно групу з назвою самого джерела.
{{% /hint %}}

## Архіви каналів (Catchup)

Якщо ваш IPTV-провайдер надає таку функцію, виберіть один із типів архіву:

+ Append
+ Flussonic
+ Shift
+ none – означає, що функцію вимкнено.

Який саме у вас тип архіву, ви можете дізнатися у свого IPTV-провайдера.

«TVLINK» підтримує автоматичне перемикання архівних потоків під час збою, незалежно від типів архіву.
Це означає, що при проблемі з архівним потоком із джерела, де стоїть тип «Shift», станеться переключення на архівний потік із джерела з «Flussonic».
Порядок перемикання залежить від пріоритету джерел. Тобто така сама функціональність, що й зі звичайними потоками.

Якщо ви використовуєте сторонній IPTV-плеєр (не PVR TVLINK Client), в його налаштуваннях потрібно встановити тип архіву «Shift».
Тобто сам «TVLINK», незалежно від того, який тип архіву в джерела, буде видавати архіви у форматі «Shift».

## Пріоритет джерела (Prio)

Якщо обидва джерела містять один і той же канал, то першим буде використано потік із джерела з вищим пріоритетом (нижчою цифрою).
Якщо цей потік не працює або припинив трансляцію під час роботи, «TVLINK» переключиться на наступне джерело з нижчим пріоритетом і так далі по колу.

## Обмеження з’єднань з джерелом (Limit)

Якщо джерело має обмеження на кількість підключень до потоків, встановіть потрібне значення.
Це потрібно для того, щоб ваш IPTV-провайдер не заблокував вам доступ. «TVLINK» буде автоматично перемикати на наступний потік, якщо ліміт буде перевищено.

«TVLINK» перемикає канали в асинхронному режимі; це означає, що програма не чекає на закриття попереднього потоку перед тим, як відкрити наступний.
В іншому випадку канали б перемикалися дуже повільно.
Ідентифікація клієнтів відбувається за їхніми IP-адресами.
Ці два факти накладають деякі обмеження на роботу опції «Limit». А саме: для клієнтів, які мають одну й ту саму IP-адресу, «TVLINK» автоматично збільшує ліміт підключень.
В журналі роботи програми ви побачите наступний запис:

    Increase MaxStream count [1+1 HD] from [MySouce]: set max stream [2] - limit [1]

Це означає, що для джерела «MySouce» встановлено ліміт на одне підключення.
Але оскільки при перемиканні каналу попередній потік ще не закрився, «TVLINK» автоматично збільшив ліміт (на одиницю).
Якщо б цього не сталося, джерело «MySouce» не було б доступне в цей момент.

Також, якщо два клієнти мають однакову IP-адресу (на одному й тому ж комп'ютері запущено два IPTV-програвачі) та роблять запит до одного джерела,
ліміт цього джерела теж буде збільшено на одиницю. Адже «TVLINK» не має можливості визначити, чи це запит на перемикання каналу одного й того самого клієнта,
чи це запит від іншого клієнта, оскільки IP-адреси у них однакові.

## Нижня частина сторінки «Sources»

+ «Update all sources» — натисніть, якщо вам потрібно оновити всі джерела каналів разом.
Якщо в налаштуваннях сервера (Settings) ввімкнена опція «Create static playlist», також буде створено статичний плейлист.
+ «Create static playlist» — якщо в налаштуваннях (сторінка Settings) у вас увімкнена опція «Create static playlist»,
то внизу, на сторінці джерел (Sources), з’явиться посилання «Create static playlist».
Це дозволяє оновити статичний плейлист, не оновлюючи всі джерела.

